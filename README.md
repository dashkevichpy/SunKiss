# SunKiss Nutrient Controller

–ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ç–≤–æ—Ä–æ–º –≥–∏–¥—Ä–æ–ø–æ–Ω–∏–∫–∏ –Ω–∞ –±–∞–∑–µ Arduino Nano.

## –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

- **MCU:** Arduino Nano (ATmega328P, 5 V, 16 MHz, 10-–±–∏—Ç –ê–¶–ü).
- **–î–∏—Å–ø–ª–µ–π:** LCD 16√ó2 —Å I¬≤C (PCF8574), –∞–¥—Ä–µ—Å 0x3F (—Ñ–æ–ª–±–µ–∫ 0x27).
- **–î–∞—Ç—á–∏–∫–∏:**
  - Gravity Analog TDS ‚Üí A0.
  - PH-4502C / Gravity Analog pH ‚Üí A1.
  - –†–µ–∑–µ—Ä–≤ –ø–æ–¥ –¥–∞—Ç—á–∏–∫–∏ —É—Ä–æ–≤–Ω—è ‚Üí A2, A3.
  - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ä–∞—Å—Ç–≤–æ—Ä–∞ ‚Üí DS18B20 (–≤ –ø–ª–∞–Ω–∞—Ö, D4).
- **–ù–∞—Å–æ—Å—ã:**
  - –î–≤–∞ –Ω–∞—Å–æ—Å–∞ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è 220 –í AC (—á–µ—Ä–µ–∑ SSR) ‚Üí D5, D6.
  - –ü–µ—Ä–∏—Å—Ç–∞–ª—å—Ç–∏—á–µ—Å–∫–∏–µ 12 –í DC: pH-DOWN (D7), pH-UP (D8), —É–¥–æ–±—Ä–µ–Ω–∏–µ A (D9), —É–¥–æ–±—Ä–µ–Ω–∏–µ B (D10) —á–µ—Ä–µ–∑ MOSFET-–¥—Ä–∞–π–≤–µ—Ä—ã.
- **–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ Serial/–ü–ö, –∫–Ω–æ–ø–æ–∫ –Ω–µ—Ç.
- **–ü–∏—Ç–∞–Ω–∏–µ:** –°–∏–ª–æ–≤–∞—è —á–∞—Å—Ç—å –Ω–∞—Å–æ—Å–æ–≤ –ø–∏—Ç–∞–µ—Ç—Å—è –æ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ 12 –í –ë–ü, 220 –í —Ü–µ–ø–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã SSR.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∏–Ω–æ–≤

–°–º. `include/pins.h` –¥–ª—è –µ–¥–∏–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ø–∏–Ω–æ–≤ –∏ –ª–æ–≥–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è —Ä–µ–ª–µ (`RELAY_ACTIVE_LOW`).

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: —Å–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ—à–∏–≤–∫–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Arduino IDE 2.x.** –°–∫–∞—á–∞–π—Ç–µ –µ—ë —Å —Å–∞–π—Ç–∞ Arduino, –∑–∞—Ç–µ–º —á–µ—Ä–µ–∑ **Tools ‚Üí Board ‚Üí Boards Manager** —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç **Arduino AVR Boards**.
2. **–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –ø—Ä–æ–µ–∫—Ç.** –°–∫–∞—á–∞–π—Ç–µ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∫–Ω–æ–ø–∫–∞ *Code ‚Üí Download ZIP* –∏–ª–∏ `git clone <URL-–≤–∞—à–µ–≥–æ-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>`). –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ —Ä–∞—Å–ø–∞–∫—É–π—Ç–µ –≤ –∫–∞—Ç–∞–ª–æ–≥ —Å–∫–µ—Ç—á–µ–π Arduino (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `–î–æ–∫—É–º–µ–Ω—Ç—ã/Arduino/SunKiss`).
3. **–û—Ç–∫—Ä–æ–π—Ç–µ —Å–∫–µ—Ç—á.** –í Arduino IDE –≤—ã–±–µ—Ä–∏—Ç–µ **File ‚Üí Open...** –∏ —É–∫–∞–∂–∏—Ç–µ —Ñ–∞–π–ª `SunKiss.ino` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞. –ï—Å–ª–∏ –≤—ã –Ω–∞—á–∏–Ω–∞–µ—Ç–µ —Å –Ω—É–ª—è, —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª `SunKiss.ino`, –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –≤ –Ω—ë–º —Ö–µ–¥–µ—Ä—ã –∏–∑ –ø–∞–ø–æ–∫ `drivers/`, `sensors/`, `process/`, `proto/`, `storage/` –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∏–º–µ—Ä –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–ü—Ä–∏–º–µ—Ä –∫–∞—Ä–∫–∞—Å–∞" –Ω–∏–∂–µ.
4. **–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞—Ç—É –∏ –ø–æ—Ä—Ç.** –í –º–µ–Ω—é **Tools** –≤—ã—Å—Ç–∞–≤—å—Ç–µ **Board ‚Üí Arduino AVR Boards ‚Üí Arduino Nano**, –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä `ATmega328P (Old Bootloader)` (–µ—Å–ª–∏ –≤–∞—à Nano —Å—Ç–∞—Ä–æ–π —Ä–µ–≤–∏–∑–∏–∏) –∏ –≤—ã–±–µ—Ä–∏—Ç–µ COM-–ø–æ—Ä—Ç, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –ø–ª–∞—Ç–∞.
5. **–°–æ–±–µ—Ä–∏—Ç–µ –∏ –ø—Ä–æ—à–µ–π—Ç–µ.** –ù–∞–∂–º–∏—Ç–µ **Verify** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–±–æ—Ä–∫–∏. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –Ω–∞–∂–º–∏—Ç–µ **Upload**. IDE —Å–æ–±–µ—Ä—ë—Ç –ø—Ä–æ–µ–∫—Ç –∏ –ø—Ä–æ—à—å—ë—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä.
6. **–û—Ç–∫—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä –ø–æ—Ä—Ç–∞.** –ß–µ—Ä–µ–∑ **Tools ‚Üí Serial Monitor** —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å 115200 –±–æ–¥, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –ª–æ–≥–∏, –æ—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–º–∞–Ω–¥—ã –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π `STATUS`.

> üí° *–ü—Ä–∏–º–µ—Ä –∫–∞—Ä–∫–∞—Å–∞* ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π `SunKiss.ino`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –º–æ–¥—É–ª–∏ –∏–∑ —ç—Ç–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

```cpp
#include <Arduino.h>

#include "proto/SerialProto.h"
#include "process/Process.h"
#include "sensors/Sensors.h"
#include "storage/Config.h"

sensors::VccMeter gVccMeter;
sensors::PhSensor gPhSensor;
sensors::EcSensor gEcSensor;
sensors::SensorPollingManager gSensors(gVccMeter, gPhSensor, gEcSensor);
process::Process gProcess(gPhSensor, gEcSensor);
proto::SerialProto gProto(Serial, gProcess, gPhSensor, gEcSensor, gVccMeter);

void setup() {
  Serial.begin(115200);
  storage::loadOrDefaults();
  gSensors.begin();
  gProcess.begin();
  gProto.begin();
}

void loop() {
  gSensors.update();
  gProcess.onTimer();
  gProcess.onSensorTick();
  gProto.update();
}
```

–¢–∞–∫–æ–π –∫–∞—Ä–∫–∞—Å –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å, –ø–æ–¥–∫–ª—é—á–∞—è LCD (`ui::LcdPages`) –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–∏–º—É–ª—è—Ü–∏–∏ (`sim/FluidSim`) –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
–§–∞–π–ª `SunKiss.ino` —Å –ø—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã–º —à–∞–±–ª–æ–Ω–æ–º —É–∂–µ –≤—Ö–æ–¥–∏—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å
–ø–æ–¥ —Å–≤–æ—ë –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ.

## –î—Ä–∞–π–≤–µ—Ä—ã –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤

–ú–æ–¥—É–ª—å `drivers/Actuators.*` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è –Ω–∞—Å–æ—Å–æ–≤ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤—Å–µ—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.

## –î–∞—Ç—á–∏–∫–∏ –∏ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å `sensors/Sensors.*` —Ä–µ–∞–ª–∏–∑—É–µ—Ç –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π –æ–ø—Ä–æ—Å –ê–¶–ü –∫–∞–∂–¥—ã–µ 100 –º—Å —Å –º–µ–¥–∏–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ 5 –∑–Ω–∞—á–µ–Ω–∏—è–º –∏ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º EMA (Œ±=0.2). –ö–∞–∂–¥—ã–µ 500 –º—Å –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —É—Å—Ä–µ–¥–Ω—ë–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è pH –∏ EC/TDS. –†–µ–∞–ª—å–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ –∏–∑–º–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `readVcc_mV()` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –æ–ø–æ—Ä—ã 1.1 V.

### –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ pH

–ö–æ–º–∞–Ω–¥—ã –ø–æ Serial:

- `CAL_PH START` ‚Äî –ø–µ—Ä–µ–π—Ç–∏ –≤ —Ä–µ–∂–∏–º –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ (–æ—á–∏—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏).
- `CAL_PH POINT <4.01|6.86|9.18>` ‚Äî –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–µ —É—Å—Ä–µ–¥–Ω—ë–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –±—É—Ñ–µ—Ä–æ–≤.
- `CAL_PH SAVE` ‚Äî —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –ø–æ –º–µ—Ç–æ–¥—É –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –∫–≤–∞–¥—Ä–∞—Ç–æ–≤, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ EEPROM.
- `CAL_PH ABORT` ‚Äî –≤—ã–π—Ç–∏ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.
- `CAL_PH READ` ‚Äî –≤—ã–≤–µ—Å—Ç–∏ —Ç–µ–∫—É—â–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –æ–ø–æ—Ä–Ω—ã—Ö –±—É—Ñ–µ—Ä–æ–≤.

–î–æ –ø–µ—Ä–≤–æ–π –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –ª–∏–Ω–µ–π–Ω–∞—è –º–æ–¥–µ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é a‚âà-5.70, b‚âà21.34) —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏.

### EC/TDS –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è

- `SET_T <¬∞C>` ‚Äî –∑–∞–¥–∞—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É —Ä–∞—Å—Ç–≤–æ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 25‚ÄØ¬∞C; –±–µ–∑ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –¥–∏—Å–ø–ª–µ–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è `T:--`).
- `SET_EC_ALPHA <Œ±>` ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–æ–π –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ (—É–º–æ–ª—á–∞–Ω–∏–µ 0.02).
- `SET_TDSFACTOR <500|640|700>` ‚Äî –≤—ã–±–æ—Ä —à–∫–∞–ª—ã –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –≤ ppm (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 500).
- `SET_K <float>` ‚Äî —Ä—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —è—á–µ–π–∫–∏.
- `CAL_EC START/POINT/SAVE/ABORT/READ` ‚Äî —Ä–∞–±–æ—á–∏–π —Ü–∏–∫–ª –ø–æ–¥—Å—Ç—Ä–æ–π–∫–∏ `K` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ EC@25‚ÄØ¬∞C, –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –¥–æ `SAVE`).

–ó–Ω–∞—á–µ–Ω–∏—è `alpha`, `tdsFactor` –∏ `K` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ EEPROM. –ü–æ–∫–∞–∑–∞–Ω–∏—è EC –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –∫ 25‚ÄØ¬∞C, –∞ TDS —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∏—Ö –æ—Å–Ω–æ–≤–µ.

## LCD 16√ó2

–ú–æ–¥—É–ª—å `ui/LcdPages.*` –≤—ã–≤–æ–¥–∏—Ç —Ç—Ä–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–µ–º—ã–µ –∫–∞–∂–¥—ã–µ 5‚ÄØ—Å –±–µ–∑ –æ—á–∏—Å—Ç–∫–∏ —ç–∫—Ä–∞–Ω–∞:

1. `pH` –∏ –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `EC` (–º–°–º/—Å–º, 2 –∑–Ω–∞–∫–∞).
2. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ä–∞—Å—Ç–≤–æ—Ä–∞ –∏ –∏–∑–º–µ—Ä–µ–Ω–Ω—ã–π `Vcc` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `T:--`, –µ—Å–ª–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–µ –∑–∞–¥–∞–Ω–∞).
3. `TDS` (ppm) –∏ —Ç–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —è—á–µ–π–∫–∏ (`K`, —Ñ–∞–∫—Ç–æ—Ä ppm).

–û–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏–≤—à–∏–µ—Å—è —Å—Ç—Ä–æ–∫–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –º–µ—Ä—Ü–∞–Ω–∏—è.

## –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ EEPROM

–ú–æ–¥—É–ª—å `storage/Config.*` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (–≤–µ—Ä—Å–∏—è, CRC16) –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∑–∞–≥—Ä—É–∑–∫—É/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ EEPROM. –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è:

- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ pH (a, b) –∏ –∑–∞—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –±—É—Ñ–µ—Ä–æ–≤ 4.01/6.86/9.18.
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã EC/TDS: `alpha`, `tdsFactor`, `K`.
- –†–∞—Å—Ö–æ–¥—ã –≤—Å–µ—Ö –¥–æ–∑–∏—Ä—É—é—â–∏—Ö –ø–æ–º–ø (–º–ª/—Å), –∞–∫—Ç–∏–≤–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å SSR (`relay_active_low`) –∏ `deviceId`.
- –ü–æ—Ä–æ–≥–æ–≤—ã–µ –≤–µ–ª–∏—á–∏–Ω—ã –ø—Ä–æ—Ü–µ—Å—Å–∞, –ø–∞—É–∑—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –≥—Ä—É–±—ã—Ö/—Ç–æ–Ω–∫–∏—Ö –¥–æ–∑ pH –∏ —Ç–∞–π–º–∞—É—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞.

–ö–æ–º–∞–Ω–¥–∞ `CONFIG_DUMP` –≤ Serial –≤—ã–≤–æ–¥–∏—Ç —Ç–µ–∫—É—â–∏–π —Å–Ω–∏–º–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–∫. –õ—é–±—ã–µ –∫–æ–º–∞–Ω–¥—ã, –∏–∑–º–µ–Ω—è—é—â–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–∫–∞–ª–∏–±—Ä–æ–≤–∫–∞, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–µ–π, ID –∏ –ø—Ä.) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –≤—ã–∑—ã–≤–∞—é—Ç `storage::save()`.

## –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º SIMULATION

–ü—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —Å `#define SIMULATION` –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –º–æ–¥—É–ª—å `sim/FluidSim.*`. –û–Ω –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç —Ä–∞—Å—Ç–≤–æ—Ä —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º `sim_ph`, –∞–∫–∫—É–º—É–ª–∏—Ä—É–µ—Ç –¥–æ–∑—ã pH-Up/Down –∏ —É–¥–æ–±—Ä–µ–Ω–∏–π, —Å–∏–º—É–ª–∏—Ä—É–µ—Ç –ø–ª–∞–≤–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –Ω–∞ –¥–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–º–µ—à–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è pH/EC/TDS –Ω–∞–ø—Ä—è–º—É—é –≤ –¥—Ä–∞–π–≤–µ—Ä—ã –¥–∞—Ç—á–∏–∫–æ–≤ (`setSimulatedPh`, `setSimulatedSolution`). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –≤–µ—Å—å —Ü–∏–∫–ª –±–µ–∑ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è –ø–æ–º–ø.

## –ñ—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

`process/Process` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ Serial —Å–æ–±—ã—Ç–∏—è: –ø–µ—Ä–µ—Ö–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π (`[state]`), –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è –¥–æ–∑–∏—Ä—É—é—â–∏—Ö –∏ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—â–∏—Ö –ø–æ–º–ø (`[pump]`, `[mix]`), –∞ —Ç–∞–∫–∂–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –ø—Ä–∏ –∞–≤–∞—Ä–∏—è—Ö (`[fault]` —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è–º–∏ –∏ —Å—É–º–º–∞—Ä–Ω—ã–º–∏ –æ–±—ä—ë–º–∞–º–∏).

## –ü—Ä–æ–≤–æ–¥–∫–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

- **–î–∞—Ç—á–∏–∫–∏:**
  - pH (PH-4502C): –≤—ã—Ö–æ–¥ Po ‚Üí A1, –ø–∏—Ç–∞–Ω–∏–µ 5 V, –æ–±—â–∞—è –∑–µ–º–ª—è, –∑–æ–Ω–¥ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω –∏ —É–¥–∞–ª—ë–Ω –æ—Ç —Å–∏–ª–æ–≤—ã—Ö –ø—Ä–æ–≤–æ–¥–æ–≤.
  - EC/TDS (Gravity Analog): OUT ‚Üí A0, –ø–∏—Ç–∞–Ω–∏–µ 5 V, –æ–±—â–∞—è –∑–µ–º–ª—è. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –±–µ—Ä—ë—Ç—Å—è –∏–∑ –ü–ö (–∫–æ–º–∞–Ω–¥–∞ `SET_T`), –ø–æ–∑–∂–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è DS18B20 –Ω–∞ D4 (—Å –ø–æ–¥—Ç—è–∂–∫–æ–π 4.7 –∫Œ© –∫ +5 V).
- **LCD I¬≤C:** –º–æ–¥—É–ª—å PCF8574 –Ω–∞ SDA=A4 –∏ SCL=A5, –ø–∏—Ç–∞–Ω–∏–µ 5 V, –∞–¥—Ä–µ—Å 0x3F (—Ä–µ–∑–µ—Ä–≤ 0x27).
- **–ü–µ—Ä–∏—Å—Ç–∞–ª—å—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–º–ø—ã 12 V DC (pH-UP/DOWN/A/B):** —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å D7/D8/D9/D10 —á–µ—Ä–µ–∑ MOSFET-–¥—Ä–∞–π–≤–µ—Ä—ã, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –æ–±—â–∏–π GND —Å Arduino, –æ–±—Ä–∞—Ç–Ω—ã–µ –¥–∏–æ–¥—ã –Ω–∞ –º–æ—Ç–æ—Ä–∞—Ö.
- **–ü–æ–º–ø—ã –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è 220 V AC:** SSR zero-cross (SSR-10DA/25DA) –Ω–∞ D5/D6, —Å–∏–ª–æ–≤–∞—è —á–∞—Å—Ç—å —Å–æ–±–ª—é–¥–∞–µ—Ç –Ω–æ—Ä–º—ã —ç–ª–µ–∫—Ç—Ä–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–£–ó–û, –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å, –∑–∞–∑–µ–º–ª–µ–Ω–∏–µ).
- **–®—É–º—ã –∏ –∑–µ–º–ª—è:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ¬´–∑–≤–µ–∑–¥–Ω—É—é¬ª –∑–µ–º–ª—é, —Å–∏–ª–æ–≤—ã–µ –ª–∏–Ω–∏–∏ –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ, –ø–∏—Ç–∞–Ω–∏–µ –¥–∞—Ç—á–∏–∫–æ–≤ ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ +5 V (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ —Ñ–∏–ª—å—Ç—Ä).
